```typescript
import { EvmBatchProcessor } from '@subsquid/evm-processor'
import { TypeormDatabase } from '@subsquid/typeorm-store'

const processor = new EvmBatchProcessor()
  .setDataSource({
    archive: 'https://v2.archive.subsquid.io/network/ethereum-mainnet',
  })
  .setBlockRange({ from: 18000000 })
  .addLog({
    address: ['0xa0b86a33e6441e5c9a5b7e7a5b7e7a5b7e7a5b7e'],
    topic0: ['0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef'],
  })

processor.run(new TypeormDatabase({ supportHotBlocks: true }), async (ctx) => {
  const transfers = []
  
  for (let block of ctx.blocks) {
    for (let log of block.logs) {
      transfers.push({
        id: log.id,
        from: log.topics[1],
        to: log.topics[2], 
        value: log.data,
        blockNumber: block.header.height,
        timestamp: new Date(block.header.timestamp)
      })
    }
  }
  
  // Batch insert for better performance
  await ctx.store.save(transfers)
})
```
