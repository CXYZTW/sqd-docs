```typescript
import { SolanaBatchProcessor } from '@subsquid/solana-processor'
import { TypeormDatabase } from '@subsquid/typeorm-store'

const processor = new SolanaBatchProcessor()
  .setDataSource({
    archive: 'https://v2.archive.subsquid.io/network/solana-mainnet',
  })
  .addInstruction({
    programId: ['11111111111111111111111111111112'], // System Program
    isCommitted: true
  })

processor.run(new TypeormDatabase(), async (ctx) => {
  for (let block of ctx.blocks) {
    for (let instruction of block.instructions) {
      // Handle Solana instructions
      console.log(`Instruction in slot ${block.header.slot}`)
    }
  }
})
```
